---
title: 家里云服务器搭建指南
published: 2025-04-21
tags:
  - 家里云配置
category: 家里云配置
description: 家里云服务器搭建指南
image: /public//public/articel/家里云服务器搭建指南.png
category_bar: "true"
---

# 家庭云服务器搭建指南（NAS + 网站托管）

---

## 一、硬件配置
### 1. 核心组件
- **CPU**  
  - 低功耗多核处理器：Intel i3/i5 或 AMD Ryzen 3/5（支持虚拟化）  
- **内存**  
  - 基础：8GB DDR4  
  - 进阶：16GB（多任务/虚拟机需求）  
- **存储**  
  - 系统盘：256GB SSD  
  - 数据盘：2-4块机械硬盘（推荐4TB/8TB，组RAID 1/5/10）  
- **主板**  
  - 需支持4+ SATA接口、千兆网卡  
- **电源**  
  - 300W-400W 80Plus认证电源  

### 2. 网络设备
- **路由器**  
  - 千兆网口 + 端口转发/DDNS支持（如OpenWRT/华硕高端型号）  
- **UPS（可选）**  
  - APC BK650等断电保护设备  

### 3. 其他配件
- **机箱**  
  - NAS专用多盘位机箱（如乔思伯N1/N2）  
- **散热**  
  - 低噪音风扇或被动散热方案  

---

## 二、操作系统选择
| 类型            | 推荐方案                               | 特点                  |
| ------------- | ---------------------------------- | ------------------- |
| **NAS专用系统**   | TrueNAS Core/UnRAID/OpenMediaVault | 易用性强，内置存储管理工具       |
| **通用Linux系统** | Ubuntu Server/Debian               | 灵活性高，适合Docker/虚拟机扩展 |
|               |                                    |                     |

---

## 三、软件部署方案
### 1. NAS功能实现
- **文件共享**  
  ```bash
  # Samba配置示例（Ubuntu）
  sudo apt install samba
  sudo nano /etc/samba/smb.conf
  ```
  - 工具：Samba（跨平台共享）、Nextcloud（私有云）  
- **媒体服务**  
  - Plex/Jellyfin（支持4K转码）  
- **自动备份**  
  - Syncthing（多设备同步） + Rclone（云端备份）  

### 2. 网站托管方案
- **Web服务栈**  
  ```bash
  # Nginx + Docker部署示例
  sudo apt install nginx
  sudo docker run -d --name wordpress -p 8080:80 wordpress
  ```
  - 服务器：Nginx/Apache  
  - 容器化：Docker（WordPress/GitLab）  
- **域名与安全**  
  - DDNS工具：Cloudflare/DuckDNS  
  - HTTPS：Let's Encrypt证书自动续期  

---

## 四、网络与安全配置
### 1. 内网穿透方案
| 场景                | 工具                          |
|---------------------|-------------------------------|
| 有公网IP            | 端口转发 + DDNS绑定域名        |
| 无公网IP            | Tailscale/Cloudflare Tunnel    |

### 2. 防火墙规则
```bash
# UFW基础配置（Ubuntu）
sudo ufw allow 80/tcp   # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw allow 22/tcp   # SSH（建议限制IP）
sudo ufw enable
```

### 3. 数据安全
- **存储冗余**：RAID 1/5/10  
- **备份策略**：3-2-1原则（3份数据，2种介质，1份异地）  

---

## 五、预算参考（人民币）
| 组件       | 低配（约¥3000）       | 高配（约¥6000+）         |
|------------|-----------------------|--------------------------|
| CPU        | Intel N5105           | AMD Ryzen 5 5600G        |
| 内存       | 8GB DDR4              | 16GB DDR4                |
| 存储       | 2x4TB HDD + 256GB SSD | 4x8TB HDD RAID5 + 512GB NVMe |
| 机箱/电源  | 乔思伯N1 + 300W电源   | 万由机箱 + 400W金牌电源  |

---

## 六、推荐组合方案
1. **硬件**  
   - CPU: AMD Ryzen 5 5600G  
   - 内存: 16GB DDR4  
   - 存储: 4x8TB HDD（RAID5） + 512GB NVMe系统盘  

2. **软件架构**  
   - 底层系统: Proxmox VE（虚拟化平台）  
   - 虚拟机1: OpenMediaVault（NAS服务）  
   - 虚拟机2: Ubuntu Server + Docker（网站/应用）  

3. **网络配置**  
   - 外网访问: Cloudflare Tunnel + 自定义域名  
   - 安全加固: SSH密钥登录 + Fail2ban防护  

---

> **实现效果**  
> - 家庭数据集中存储，支持多设备访问/备份  
> - 7x24小时运行个人网站/博客  
> - 功耗<50W，兼顾性能与静音  