---
title: Fuwari æ·»åŠ é¢æ¿é€æ˜åº¦è°ƒèŠ‚åŠŸèƒ½
published: 2025-11-07
description: è¯¦ç»†æ•™ç¨‹ï¼šå¦‚ä½•åœ¨ Fuwari ä¸»é¢˜çš„ Theme Color é¢æ¿ä¸­æ·»åŠ é€æ˜åº¦è°ƒèŠ‚åŠŸèƒ½ï¼Œå®ç°é¢æ¿èƒŒæ™¯é€æ˜åº¦çš„åŠ¨æ€æ§åˆ¶ã€‚
tags: [Fuwari, Astro, ä¸»é¢˜å®šåˆ¶, é€æ˜åº¦, UI/UX]
category: Fuwari
image: https://cdn.mengze.vip/gh/Skarie/hexoimg/%E3%80%90%E5%93%B2%E9%A3%8E%E5%A3%81%E7%BA%B8%E3%80%91%E5%92%96%E5%95%A1-%E5%92%96%E5%95%A1%E5%B1%8B-%E5%A4%9C%E6%99%AF.png
draft: false
---

## å‰è¨€

åœ¨åšå®¢ä¸»é¢˜å®šåˆ¶ä¸­ï¼Œé€æ˜åº¦è°ƒèŠ‚æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ Fuwari ä¸»é¢˜çš„ Theme Color é¢æ¿ä¸­æ·»åŠ é€æ˜åº¦è°ƒèŠ‚åŠŸèƒ½ï¼Œè®©ç”¨æˆ·å¯ä»¥åŠ¨æ€æ§åˆ¶é¢æ¿ï¼ˆå¦‚å¡ç‰‡ã€æµ®åŠ¨é¢æ¿ç­‰ï¼‰çš„èƒŒæ™¯é€æ˜åº¦ã€‚

### ä½ å°†å­¦åˆ°ä»€ä¹ˆ

- å¦‚ä½•é€šè¿‡ JavaScript åŠ¨æ€ä¿®æ”¹ CSS å˜é‡
- å¦‚ä½•å®ç°ä¸»é¢˜åˆ‡æ¢æ—¶çš„è‡ªåŠ¨åŒæ­¥
- å¦‚ä½•å¤„ç†äº®è‰²/æš—è‰²æ¨¡å¼çš„é¢œè‰²è½¬æ¢
- å¦‚ä½•åœ¨ Svelte ç»„ä»¶ä¸­æ·»åŠ äº¤äº’å¼æ»‘å—
- å¦‚ä½•å®ç°è®¾ç½®çš„æŒä¹…åŒ–å­˜å‚¨

### å‰ç½®è¦æ±‚

- ç†Ÿæ‚‰ TypeScript/JavaScript åŸºç¡€è¯­æ³•
- äº†è§£ Astro å’Œ Svelte çš„åŸºæœ¬æ¦‚å¿µ
- ç†Ÿæ‚‰ CSS å˜é‡å’Œ rgba é¢œè‰²æ ¼å¼
- æœ‰åŸºæœ¬çš„æ–‡ä»¶æ“ä½œå’Œä»£ç ç¼–è¾‘ç»éªŒ

### é¢„æœŸæ•ˆæœ

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ çš„ Theme Color é¢æ¿å°†æ–°å¢ä¸€ä¸ªé€æ˜åº¦æ»‘å—ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- é€šè¿‡æ»‘å—è°ƒèŠ‚é¢æ¿é€æ˜åº¦ï¼ˆ0-100%ï¼‰
- å®æ—¶æŸ¥çœ‹å½“å‰é€æ˜åº¦ç™¾åˆ†æ¯”
- ä¸€é”®é‡ç½®ä¸ºé»˜è®¤å€¼ï¼ˆ100%ï¼‰
- è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œåˆ·æ–°åä»ç„¶æœ‰æ•ˆ

## å®ç°æ€è·¯

ä¸ä¼ ç»Ÿçš„ä½¿ç”¨ CSS `opacity` å±æ€§ä¸åŒï¼Œæœ¬æ–‡é‡‡ç”¨**ç›´æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²çš„é€æ˜åº¦**çš„æ–¹å¼ï¼š

1. **ä¸ä½¿ç”¨ CSS `opacity` å±æ€§**ï¼šé¿å…å½±å“å­å…ƒç´ çš„é€æ˜åº¦
2. **åŠ¨æ€ä¿®æ”¹ CSS å˜é‡**ï¼šé€šè¿‡ JavaScript åŠ¨æ€è®¡ç®—å¹¶è®¾ç½® `--card-bg` å’Œ `--float-panel-bg` ä¸ºå¸¦é€æ˜åº¦çš„ `rgba()` å€¼
3. **æ ¹æ®ä¸»é¢˜æ¨¡å¼é€‚é…**ï¼šäº®è‰²æ¨¡å¼å’Œæš—è‰²æ¨¡å¼ä½¿ç”¨ä¸åŒçš„é¢œè‰²è®¡ç®—æ–¹å¼
4. **è‡ªåŠ¨åŒæ­¥**ï¼šä¸»é¢˜åˆ‡æ¢å’Œè‰²ç›¸ï¼ˆHueï¼‰æ”¹å˜æ—¶è‡ªåŠ¨é‡æ–°åº”ç”¨é€æ˜åº¦

### æŠ€æœ¯é€‰å‹è¯´æ˜

#### ä¸ºä»€ä¹ˆé€‰æ‹©ç›´æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼Ÿ

**æ–¹æ¡ˆå¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| CSS `opacity` | å®ç°ç®€å•ï¼Œä»£ç é‡å°‘ | ä¼šå½±å“æ‰€æœ‰å­å…ƒç´ ï¼Œå¯¼è‡´æ–‡å­—ã€æŒ‰é’®ç­‰ä¹Ÿå˜é€æ˜ | éœ€è¦æ•´ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬å­å…ƒç´ ï¼‰ä¸€èµ·å˜é€æ˜ |
| ä¿®æ”¹ `rgba()` çš„ alpha å€¼ | åªå½±å“èƒŒæ™¯ï¼Œå­å…ƒç´ ä¸å—å½±å“ | éœ€è¦åŠ¨æ€è®¡ç®—é¢œè‰²å€¼ï¼Œä»£ç ç¨å¤æ‚ | **æˆ‘ä»¬çš„åœºæ™¯**ï¼šåªæ”¹å˜èƒŒæ™¯é€æ˜åº¦ |

**æˆ‘ä»¬çš„éœ€æ±‚ï¼š**
- âœ… åªæ”¹å˜é¢æ¿èƒŒæ™¯çš„é€æ˜åº¦
- âœ… ä¿æŒæ–‡å­—ã€æŒ‰é’®ç­‰å­å…ƒç´ å®Œå…¨ä¸é€æ˜
- âœ… æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼åˆ‡æ¢
- âœ… è®¾ç½®æŒä¹…åŒ–ä¿å­˜

å› æ­¤ï¼Œé€‰æ‹©ç›´æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²çš„ `rgba()` alpha å€¼æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚

### æ–‡ä»¶ç»“æ„æ¦‚è§ˆ

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š

```
fuwari/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â”œâ”€â”€ i18nKey.ts                    # å›½é™…åŒ–é”®å®šä¹‰
â”‚   â”‚   â””â”€â”€ languages/
â”‚   â”‚       â”œâ”€â”€ zh_CN.ts                  # ä¸­æ–‡ç¿»è¯‘
â”‚   â”‚       â””â”€â”€ en.ts                     # è‹±æ–‡ç¿»è¯‘
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ setting-utils.ts              # è®¾ç½®å·¥å…·å‡½æ•°ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ widget/
â”‚   â”‚       â””â”€â”€ DisplaySettings.svelte    # æ˜¾ç¤ºè®¾ç½®ç»„ä»¶ï¼ˆUIï¼‰
â”‚   â””â”€â”€ layouts/
â”‚       â””â”€â”€ Layout.astro                  # å¸ƒå±€æ–‡ä»¶ï¼ˆåˆå§‹åŒ–ï¼‰
```

**å„æ–‡ä»¶çš„ä½œç”¨ï¼š**
- `i18nKey.ts` å’Œè¯­è¨€æ–‡ä»¶ï¼šæä¾›å¤šè¯­è¨€æ”¯æŒ
- `setting-utils.ts`ï¼šæ ¸å¿ƒé€»è¾‘ï¼Œå¤„ç†é€æ˜åº¦çš„è·å–ã€è®¾ç½®å’Œåº”ç”¨
- `DisplaySettings.svelte`ï¼šUI ç»„ä»¶ï¼Œæä¾›ç”¨æˆ·äº¤äº’ç•Œé¢
- `Layout.astro`ï¼šé¡µé¢åˆå§‹åŒ–ï¼ŒåŠ è½½ä¿å­˜çš„è®¾ç½®

## å®ç°æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ·»åŠ å›½é™…åŒ–æ”¯æŒ

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨å›½é™…åŒ–æ–‡ä»¶ä¸­æ·»åŠ é€æ˜åº¦ç›¸å…³çš„ç¿»è¯‘ã€‚è¿™ä¸€æ­¥ç¡®ä¿åŠŸèƒ½æ”¯æŒå¤šè¯­è¨€ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

#### 1.1 æ›´æ–° `src/i18n/i18nKey.ts`

æ‰“å¼€ `src/i18n/i18nKey.ts` æ–‡ä»¶ï¼Œæ‰¾åˆ° `themeColor` çš„å®šä¹‰ä½ç½®ï¼Œåœ¨å…¶ä¸‹æ–¹æ·»åŠ æ–°çš„é”®ï¼š

```typescript
enum I18nKey {
	home = "home",
	about = "about",
	archive = "archive",
	search = "search",
	
	tags = "tags",
	categories = "categories",
	recentPosts = "recentPosts",
	
	comments = "comments",
	
	untitled = "untitled",
	uncategorized = "uncategorized",
	noTags = "noTags",
	
	wordCount = "wordCount",
	wordsCount = "wordsCount",
	minuteCount = "minuteCount",
	minutesCount = "minutesCount",
	postCount = "postCount",
	postsCount = "postsCount",
	
	themeColor = "themeColor",
	panelOpacity = "panelOpacity",  // ğŸ‘ˆ æ–°å¢è¿™ä¸€è¡Œ
	lightMode = "lightMode",
	darkMode = "darkMode",
	systemMode = "systemMode",
	
	more = "more",
	
	author = "author",
	publishedAt = "publishedAt",
	license = "license",
}

export default I18nKey;
```

**ä»£ç è¯´æ˜ï¼š**
- `panelOpacity` æ˜¯æ–°å¢çš„å›½é™…åŒ–é”®ï¼Œç”¨äºæ ‡è¯†"é¢æ¿é€æ˜åº¦"è¿™ä¸ªæ–‡æœ¬
- é”®åä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œä¸é¡¹ç›®ä¸­å…¶ä»–é”®ä¿æŒä¸€è‡´
- è¿™ä¸ªé”®ä¼šåœ¨åç»­çš„ç»„ä»¶ä¸­é€šè¿‡ `i18n(I18nKey.panelOpacity)` ä½¿ç”¨

#### 1.2 æ·»åŠ ä¸­æ–‡ç¿»è¯‘

æ‰“å¼€ `src/i18n/languages/zh_CN.ts` æ–‡ä»¶ï¼Œåœ¨ `themeColor` çš„ç¿»è¯‘ä¸‹æ–¹æ·»åŠ ï¼š

```typescript
import Key from "../i18nKey";
import type { Translation } from "../translation";

export const zh_CN: Translation = {
	[Key.home]: "ä¸»é¡µ",
	[Key.about]: "å…³äº",
	// ... å…¶ä»–ç¿»è¯‘ ...
	
	[Key.themeColor]: "ä¸»é¢˜è‰²",
	[Key.panelOpacity]: "é¢æ¿é€æ˜åº¦",  // ğŸ‘ˆ æ–°å¢è¿™ä¸€è¡Œ
	
	[Key.lightMode]: "äº®è‰²",
	[Key.darkMode]: "æš—è‰²",
	[Key.systemMode]: "è·Ÿéšç³»ç»Ÿ",
	
	// ... å…¶ä»–ç¿»è¯‘ ...
};
```

**ä»£ç è¯´æ˜ï¼š**
- `[Key.panelOpacity]` æ˜¯å¯¹è±¡å­—é¢é‡çš„è®¡ç®—å±æ€§åè¯­æ³•
- `"é¢æ¿é€æ˜åº¦"` æ˜¯æ˜¾ç¤ºç»™ä¸­æ–‡ç”¨æˆ·çœ‹çš„æ–‡æœ¬
- ç¡®ä¿é€—å·å’Œæ ¼å¼ä¸å…¶ä»–ç¿»è¯‘é¡¹ä¸€è‡´

#### 1.3 æ·»åŠ è‹±æ–‡ç¿»è¯‘

æ‰“å¼€ `src/i18n/languages/en.ts` æ–‡ä»¶ï¼ŒåŒæ ·æ·»åŠ è‹±æ–‡ç¿»è¯‘ï¼š

```typescript
import Key from "../i18nKey";
import type { Translation } from "../translation";

export const en: Translation = {
	[Key.home]: "Home",
	[Key.about]: "About",
	// ... å…¶ä»–ç¿»è¯‘ ...
	
	[Key.themeColor]: "Theme Color",
	[Key.panelOpacity]: "Panel Opacity",  // ğŸ‘ˆ æ–°å¢è¿™ä¸€è¡Œ
	
	[Key.lightMode]: "Light",
	[Key.darkMode]: "Dark",
	[Key.systemMode]: "System",
	
	// ... å…¶ä»–ç¿»è¯‘ ...
};
```

**ä»£ç è¯´æ˜ï¼š**
- è‹±æ–‡ç¿»è¯‘ä½¿ç”¨ "Panel Opacity"ï¼Œç¬¦åˆè‹±æ–‡è¡¨è¾¾ä¹ æƒ¯
- å¦‚æœé¡¹ç›®æ”¯æŒå…¶ä»–è¯­è¨€ï¼ˆå¦‚æ—¥æ–‡ã€éŸ©æ–‡ç­‰ï¼‰ï¼Œä¹Ÿéœ€è¦åœ¨å¯¹åº”çš„è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ ç¿»è¯‘

#### 1.4 éªŒè¯å›½é™…åŒ–é…ç½®

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. **TypeScript ç±»å‹æ£€æŸ¥**ï¼šå¦‚æœä½¿ç”¨ TypeScriptï¼Œç¼–è¾‘å™¨åº”è¯¥ä¸ä¼šæŠ¥é”™
2. **è¿è¡Œé¡¹ç›®**ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯
3. **æŸ¥çœ‹ç¿»è¯‘**ï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `i18n(I18nKey.panelOpacity)` åº”è¯¥èƒ½æ­£ç¡®æ˜¾ç¤ºç¿»è¯‘æ–‡æœ¬

**å¸¸è§é”™è¯¯ï¼š**
- âŒ å¿˜è®°åœ¨ `i18nKey.ts` ä¸­æ·»åŠ é”®å®šä¹‰
- âŒ åœ¨è¯­è¨€æ–‡ä»¶ä¸­æ‹¼å†™é”™è¯¯ï¼ˆå¦‚ `panelOpactiy` å°‘äº†ä¸€ä¸ª `a`ï¼‰
- âŒ å¿˜è®°æ·»åŠ é€—å·ï¼Œå¯¼è‡´è¯­æ³•é”™è¯¯
- âŒ é”®åä¸ä¸€è‡´ï¼ˆå¦‚ `i18nKey.ts` ä¸­æ˜¯ `panelOpacity`ï¼Œä½†è¯­è¨€æ–‡ä»¶ä¸­æ˜¯ `panel_opacity`ï¼‰

**æ’æŸ¥æ–¹æ³•ï¼š**
- æ£€æŸ¥ç¼–è¾‘å™¨æ˜¯å¦æœ‰çº¢è‰²æ³¢æµªçº¿æç¤º
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- ç¡®è®¤æ‰€æœ‰æ–‡ä»¶éƒ½å·²ä¿å­˜

### ç¬¬äºŒæ­¥ï¼šå®ç°é€æ˜åº¦å·¥å…·å‡½æ•°

åœ¨ `src/utils/setting-utils.ts` ä¸­æ·»åŠ é€æ˜åº¦ç›¸å…³çš„å‡½æ•°ã€‚è¿™æ˜¯æ•´ä¸ªåŠŸèƒ½çš„æ ¸å¿ƒé€»è¾‘éƒ¨åˆ†ã€‚

#### 2.1 æŸ¥çœ‹ç°æœ‰ä»£ç ç»“æ„

é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ `setting-utils.ts` æ–‡ä»¶çš„ç°æœ‰ç»“æ„ã€‚æ‰“å¼€æ–‡ä»¶ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```typescript
import {
	AUTO_MODE,
	DARK_MODE,
	DEFAULT_THEME,
	LIGHT_MODE,
} from "@constants/constants.ts";
import { expressiveCodeConfig } from "@/config";
import type { LIGHT_DARK_MODE } from "@/types/config.ts";

// è‰²ç›¸ï¼ˆHueï¼‰ç›¸å…³å‡½æ•°
export function getDefaultHue(): number { /* ... */ }
export function getHue(): number { /* ... */ }
export function setHue(hue: number): void { /* ... */ }

// ä¸»é¢˜ç›¸å…³å‡½æ•°
export function applyThemeToDocument(theme: LIGHT_DARK_MODE) { /* ... */ }
export function setTheme(theme: LIGHT_DARK_MODE): void { /* ... */ }
export function getStoredTheme(): LIGHT_DARK_MODE { /* ... */ }
```

æˆ‘ä»¬å°†åœ¨æ–‡ä»¶æœ«å°¾ï¼ˆ`getStoredTheme` å‡½æ•°ä¹‹åï¼‰æ·»åŠ é€æ˜åº¦ç›¸å…³çš„å‡½æ•°ã€‚

#### 2.2 æ·»åŠ è·å–å’Œè®¾ç½®é€æ˜åº¦çš„å‡½æ•°

åœ¨ `getStoredTheme()` å‡½æ•°ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```typescript
/**
 * è·å–é»˜è®¤é€æ˜åº¦å€¼
 * @returns é»˜è®¤é€æ˜åº¦ï¼Œ1.0 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜
 */
export function getDefaultOpacity(): number {
	return 1.0; // é»˜è®¤å®Œå…¨ä¸é€æ˜
}

/**
 * ä» localStorage è·å–ä¿å­˜çš„é€æ˜åº¦å€¼
 * å¦‚æœæœªä¿å­˜è¿‡ï¼Œè¿”å›é»˜è®¤å€¼
 * @returns é€æ˜åº¦å€¼ï¼ŒèŒƒå›´ 0-1
 */
export function getOpacity(): number {
	const stored = localStorage.getItem("panelOpacity");
	// å¦‚æœ localStorage ä¸­æœ‰å€¼ï¼Œè§£æä¸ºæµ®ç‚¹æ•°ï¼›å¦åˆ™è¿”å›é»˜è®¤å€¼
	return stored ? Number.parseFloat(stored) : getDefaultOpacity();
}

/**
 * è®¾ç½®é€æ˜åº¦å¹¶åº”ç”¨åˆ° CSS å˜é‡
 * è¿™æ˜¯æ ¸å¿ƒå‡½æ•°ï¼Œè´Ÿè´£ï¼š
 * 1. ä¿å­˜é€æ˜åº¦åˆ° localStorage
 * 2. æ ¹æ®å½“å‰ä¸»é¢˜æ¨¡å¼è®¡ç®—èƒŒæ™¯é¢œè‰²
 * 3. åŠ¨æ€è®¾ç½® CSS å˜é‡
 * 
 * @param opacity é€æ˜åº¦å€¼ï¼ŒèŒƒå›´ 0-1ï¼ˆ0=å®Œå…¨é€æ˜ï¼Œ1=å®Œå…¨ä¸é€æ˜ï¼‰
 */
export function setOpacity(opacity: number): void {
	// 1. ä¿å­˜åˆ° localStorageï¼Œå®ç°æŒä¹…åŒ–
	localStorage.setItem("panelOpacity", String(opacity));
	
	// 2. è·å–æ ¹å…ƒç´ ï¼ˆ:rootï¼‰ï¼Œç”¨äºè®¾ç½® CSS å˜é‡
	const r = document.querySelector(":root") as HTMLElement;
	if (!r) {
		// å¦‚æœè·å–ä¸åˆ°æ ¹å…ƒç´ ï¼ˆç†è®ºä¸Šä¸åº”è¯¥å‘ç”Ÿï¼‰ï¼Œç›´æ¥è¿”å›
		return;
	}

	// 3. æ£€æŸ¥å½“å‰æ˜¯å¦ä¸ºæš—è‰²æ¨¡å¼
	const isDark = r.classList.contains("dark");

	// 4. æ ¹æ®ä¸»é¢˜æ¨¡å¼è®¾ç½®ä¸åŒçš„èƒŒæ™¯é¢œè‰²
	if (isDark) {
		// === æš—è‰²æ¨¡å¼ ===
		// åŸå§‹é¢œè‰²å®šä¹‰ï¼šoklch(0.23 0.015 var(--hue))
		// ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å°† lightness 0.23 è½¬æ¢ä¸ºç°åº¦å€¼
		// lightness èŒƒå›´æ˜¯ 0-1ï¼Œéœ€è¦ä¹˜ä»¥ 255 è½¬æ¢ä¸º RGB å€¼
		const gray = Math.round(0.23 * 255);  // çº¦ç­‰äº 59
		
		// è®¾ç½®å¡ç‰‡èƒŒæ™¯ï¼šrgba(59, 59, 59, opacity)
		// è¿™æ ·åªæœ‰èƒŒæ™¯å˜é€æ˜ï¼Œæ–‡å­—ç­‰å­å…ƒç´ ä¸å—å½±å“
		r.style.setProperty(
			"--card-bg",
			`rgba(${gray}, ${gray}, ${gray}, ${opacity})`,
		);

		// æµ®åŠ¨é¢æ¿çš„èƒŒæ™¯è‰²ç¨æš—ä¸€äº›
		const grayPanel = Math.round(0.19 * 255);  // çº¦ç­‰äº 48
		r.style.setProperty(
			"--float-panel-bg",
			`rgba(${grayPanel}, ${grayPanel}, ${grayPanel}, ${opacity})`,
		);
	} else {
		// === äº®è‰²æ¨¡å¼ ===
		// åŸå§‹é¢œè‰²æ˜¯ç™½è‰²ï¼Œç›´æ¥ä½¿ç”¨ rgba(255, 255, 255, opacity)
		r.style.setProperty("--card-bg", `rgba(255, 255, 255, ${opacity})`);
		r.style.setProperty("--float-panel-bg", `rgba(255, 255, 255, ${opacity})`);
	}
}

/**
 * å½“ä¸»é¢˜åˆ‡æ¢æ—¶ï¼Œé‡æ–°åº”ç”¨é€æ˜åº¦è®¾ç½®
 * è¿™ä¸ªå‡½æ•°ä¼šåœ¨ä¸»é¢˜åˆ‡æ¢å’Œè‰²ç›¸æ”¹å˜æ—¶è¢«è°ƒç”¨
 */
export function applyOpacityOnThemeChange(): void {
	const opacity = getOpacity();
	setOpacity(opacity);
}
```

**ä»£ç è¯¦è§£ï¼š**

1. **`getDefaultOpacity()`**ï¼š
   - è¿”å›é»˜è®¤é€æ˜åº¦å€¼ 1.0ï¼ˆ100% ä¸é€æ˜ï¼‰
   - è¿™æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€

2. **`getOpacity()`**ï¼š
   - ä» `localStorage` è¯»å–ä¿å­˜çš„é€æ˜åº¦å€¼
   - ä½¿ç”¨ `Number.parseFloat()` å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—
   - å¦‚æœ `localStorage` ä¸­æ²¡æœ‰å€¼ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰ï¼Œè¿”å›é»˜è®¤å€¼
   - ä½¿ç”¨ `localStorage` çš„å¥½å¤„æ˜¯æ•°æ®ä¼šæŒä¹…ä¿å­˜ï¼Œå³ä½¿å…³é—­æµè§ˆå™¨ä¹Ÿä¸ä¼šä¸¢å¤±

3. **`setOpacity(opacity)`**ï¼š
   - **æ­¥éª¤ 1**ï¼šä¿å­˜åˆ° `localStorage`ï¼Œé”®åä¸º `"panelOpacity"`
   - **æ­¥éª¤ 2**ï¼šè·å– `:root` å…ƒç´ ï¼Œè¿™æ˜¯è®¾ç½® CSS å˜é‡çš„ç›®æ ‡
   - **æ­¥éª¤ 3**ï¼šæ£€æŸ¥å½“å‰ä¸»é¢˜æ¨¡å¼ï¼ˆé€šè¿‡ `dark` ç±»ååˆ¤æ–­ï¼‰
   - **æ­¥éª¤ 4**ï¼šæ ¹æ®ä¸»é¢˜æ¨¡å¼è®¡ç®—å¹¶è®¾ç½®èƒŒæ™¯é¢œè‰²
     - æš—è‰²æ¨¡å¼ï¼šå°† `oklch` çš„ lightness è½¬æ¢ä¸ºç°åº¦ RGB å€¼
     - äº®è‰²æ¨¡å¼ï¼šç›´æ¥ä½¿ç”¨ç™½è‰² `rgba(255, 255, 255, opacity)`
   - ä½¿ç”¨ `style.setProperty()` åŠ¨æ€è®¾ç½® CSS å˜é‡ï¼Œè¿™æ ·ä¼šè¦†ç›– Stylus ä¸­å®šä¹‰çš„é»˜è®¤å€¼

4. **`applyOpacityOnThemeChange()`**ï¼š
   - è¿™æ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œç”¨äºåœ¨ä¸»é¢˜åˆ‡æ¢æ—¶é‡æ–°åº”ç”¨é€æ˜åº¦
   - å…ˆè·å–å½“å‰ä¿å­˜çš„é€æ˜åº¦å€¼ï¼Œç„¶åè°ƒç”¨ `setOpacity()` é‡æ–°åº”ç”¨

**å…³é”®ç‚¹è¯´æ˜ï¼š**

- **ä¸ºä»€ä¹ˆä½¿ç”¨ `rgba()` è€Œä¸æ˜¯ `opacity` å±æ€§ï¼Ÿ**
  - `opacity` ä¼šå½±å“æ•´ä¸ªå…ƒç´ åŠå…¶æ‰€æœ‰å­å…ƒç´ 
  - `rgba()` åªå½±å“èƒŒæ™¯é¢œè‰²ï¼Œå­å…ƒç´ ä¸å—å½±å“
  - è¿™æ ·æ–‡å­—ã€æŒ‰é’®ç­‰å­å…ƒç´ ä¿æŒå®Œå…¨ä¸é€æ˜ï¼Œå¯è¯»æ€§æ›´å¥½

- **é¢œè‰²è½¬æ¢çš„ç®€åŒ–å¤„ç†ï¼š**
  - å®Œæ•´çš„ `oklch` åˆ° `rgba` è½¬æ¢éœ€è¦è€ƒè™‘ lightnessã€chromaï¼ˆé¥±å’Œåº¦ï¼‰å’Œ hueï¼ˆè‰²ç›¸ï¼‰
  - ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº† lightness å€¼ï¼Œå¿½ç•¥äº† chroma å’Œ hue çš„å½±å“
  - è¿™æ„å‘³ç€æš—è‰²æ¨¡å¼ä¸‹çš„é¢œè‰²æ˜¯ç°åº¦ï¼Œè€Œä¸æ˜¯å¸¦è‰²è°ƒçš„é¢œè‰²
  - å¦‚æœéœ€è¦æ›´ç²¾ç¡®çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨ `culori` ç­‰é¢œè‰²è½¬æ¢åº“

**æµ‹è¯•æ–¹æ³•ï¼š**

ä½ å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æµ‹è¯•è¿™äº›å‡½æ•°ï¼š

```javascript
// è·å–å½“å‰é€æ˜åº¦
getOpacity()  // åº”è¯¥è¿”å› 1.0ï¼ˆé»˜è®¤å€¼ï¼‰

// è®¾ç½®é€æ˜åº¦ä¸º 50%
setOpacity(0.5)

// æ£€æŸ¥ CSS å˜é‡æ˜¯å¦å·²æ›´æ–°
getComputedStyle(document.documentElement).getPropertyValue('--card-bg')
// åº”è¯¥è¿”å›ç±»ä¼¼ "rgba(255, 255, 255, 0.5)" çš„å€¼

// æ£€æŸ¥ localStorage
localStorage.getItem('panelOpacity')  // åº”è¯¥è¿”å› "0.5"
```

#### 2.3 åœ¨ä¸»é¢˜åˆ‡æ¢æ—¶è‡ªåŠ¨åº”ç”¨é€æ˜åº¦

æ‰¾åˆ° `applyThemeToDocument` å‡½æ•°ï¼Œåœ¨å‡½æ•°æœ«å°¾æ·»åŠ é€æ˜åº¦é‡æ–°åº”ç”¨çš„è°ƒç”¨ï¼š

```typescript
export function applyThemeToDocument(theme: LIGHT_DARK_MODE) {
	switch (theme) {
		case LIGHT_MODE:
			document.documentElement.classList.remove("dark");
			break;
		case DARK_MODE:
			document.documentElement.classList.add("dark");
			break;
		case AUTO_MODE:
			if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
				document.documentElement.classList.add("dark");
			} else {
				document.documentElement.classList.remove("dark");
			}
			break;
	}

	// Set the theme for Expressive Code
	document.documentElement.setAttribute(
		"data-theme",
		expressiveCodeConfig.theme,
	);

	// ğŸ‘‡ æ–°å¢ï¼šä¸»é¢˜åˆ‡æ¢åé‡æ–°åº”ç”¨é€æ˜åº¦
	// å› ä¸ºäº®è‰²å’Œæš—è‰²æ¨¡å¼ä½¿ç”¨ä¸åŒçš„é¢œè‰²è®¡ç®—æ–¹å¼ï¼Œåˆ‡æ¢ä¸»é¢˜æ—¶éœ€è¦é‡æ–°è®¡ç®—
	applyOpacityOnThemeChange();
}
```

**ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€æ­¥ï¼Ÿ**

å½“ç”¨æˆ·ä»äº®è‰²æ¨¡å¼åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼æ—¶ï¼š
- äº®è‰²æ¨¡å¼ä½¿ç”¨ `rgba(255, 255, 255, opacity)`ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰
- æš—è‰²æ¨¡å¼ä½¿ç”¨ `rgba(59, 59, 59, opacity)`ï¼ˆç°è‰²èƒŒæ™¯ï¼‰

å¦‚æœä¸é‡æ–°åº”ç”¨é€æ˜åº¦ï¼ŒèƒŒæ™¯é¢œè‰²ä¼šä¿æŒä¹‹å‰çš„æ¨¡å¼ï¼Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯ã€‚

#### 2.4 åœ¨è‰²ç›¸æ”¹å˜æ—¶é‡æ–°åº”ç”¨é€æ˜åº¦

æ‰¾åˆ° `setHue` å‡½æ•°ï¼Œåœ¨è®¾ç½® `--hue` å˜é‡åæ·»åŠ é€æ˜åº¦é‡æ–°åº”ç”¨çš„è°ƒç”¨ï¼š

```typescript
export function setHue(hue: number): void {
	localStorage.setItem("hue", String(hue));
	const r = document.querySelector(":root") as HTMLElement;
	if (!r) {
		return;
	}
	r.style.setProperty("--hue", String(hue));
	
	// ğŸ‘‡ æ–°å¢ï¼šHue æ”¹å˜åé‡æ–°åº”ç”¨é€æ˜åº¦
	// è™½ç„¶å½“å‰å®ç°ç®€åŒ–äº†é¢œè‰²è½¬æ¢ï¼ˆå¿½ç•¥äº† hueï¼‰ï¼Œä½†ä¸ºäº†ä¿æŒä¸€è‡´æ€§ï¼Œ
	// ä»¥åŠä¸ºå°†æ¥å¯èƒ½çš„ç²¾ç¡®é¢œè‰²è½¬æ¢åšå‡†å¤‡ï¼Œè¿™é‡Œä¹Ÿé‡æ–°åº”ç”¨é€æ˜åº¦
	applyOpacityOnThemeChange();
}
```

**ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸€æ­¥ï¼Ÿ**

è™½ç„¶å½“å‰å®ç°ç®€åŒ–äº†é¢œè‰²è½¬æ¢ï¼ˆåªä½¿ç”¨ lightnessï¼Œå¿½ç•¥äº† hueï¼‰ï¼Œä½†ï¼š
1. **ä¿æŒä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰è®¾ç½®æ”¹å˜æ—¶éƒ½é‡æ–°åº”ç”¨é€æ˜åº¦
2. **ä¸ºæœªæ¥æ‰©å±•åšå‡†å¤‡**ï¼šå¦‚æœå°†æ¥å®ç°å®Œæ•´çš„ `oklch` è½¬æ¢ï¼Œhue çš„æ”¹å˜ä¼šå½±å“é¢œè‰²
3. **é¿å…æ½œåœ¨é—®é¢˜**ï¼šé˜²æ­¢åœ¨æŸäº›è¾¹ç¼˜æƒ…å†µä¸‹å‡ºç°é¢œè‰²ä¸åŒæ­¥çš„é—®é¢˜

**å®Œæ•´çš„å‡½æ•°è°ƒç”¨é“¾ï¼š**

```
ç”¨æˆ·æ“ä½œ
  â†“
setOpacity(0.5)  â† ç›´æ¥è®¾ç½®é€æ˜åº¦
  â†“
setOpacity() å†…éƒ¨è°ƒç”¨
  â†“
r.style.setProperty("--card-bg", "rgba(...)")  â† æ›´æ–° CSS å˜é‡

æˆ–è€…

ç”¨æˆ·åˆ‡æ¢ä¸»é¢˜
  â†“
applyThemeToDocument()
  â†“
applyOpacityOnThemeChange()
  â†“
getOpacity()  â† è·å–ä¿å­˜çš„å€¼
  â†“
setOpacity()  â† é‡æ–°åº”ç”¨
  â†“
r.style.setProperty("--card-bg", "rgba(...)")  â† æ›´æ–° CSS å˜é‡
```

**éªŒè¯æ­¥éª¤ï¼š**

1. è®¾ç½®é€æ˜åº¦ä¸º 50%
2. åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼ï¼Œæ£€æŸ¥èƒŒæ™¯æ˜¯å¦æ­£ç¡®
3. åˆ‡æ¢å›äº®è‰²æ¨¡å¼ï¼Œæ£€æŸ¥èƒŒæ™¯æ˜¯å¦æ­£ç¡®
4. æ”¹å˜è‰²ç›¸ï¼Œæ£€æŸ¥é€æ˜åº¦æ˜¯å¦ä¿æŒ

### ç¬¬ä¸‰æ­¥ï¼šæ›´æ–° DisplaySettings ç»„ä»¶

åœ¨ `src/components/widget/DisplaySettings.svelte` ä¸­æ·»åŠ é€æ˜åº¦æ»‘å—ã€‚è¿™æ˜¯ç”¨æˆ·äº¤äº’çš„ç•Œé¢éƒ¨åˆ†ã€‚

#### 3.1 æŸ¥çœ‹ç°æœ‰ç»„ä»¶ç»“æ„

æ‰“å¼€ `src/components/widget/DisplaySettings.svelte`ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æ„ï¼š

```svelte
<script lang="ts">
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";
import Icon from "@iconify/svelte";
import { getDefaultHue, getHue, setHue } from "@utils/setting-utils";

let hue = getHue();
const defaultHue = getDefaultHue();

function resetHue() {
	hue = getDefaultHue();
}

$: if (hue || hue === 0) {
	setHue(hue);
}
</script>

<div id="display-setting" class="float-panel float-panel-closed absolute transition-all w-80 right-4 px-4 py-4">
    <!-- ä¸»é¢˜è‰²æ§åˆ¶éƒ¨åˆ† -->
    <!-- ... -->
</div>
```

#### 3.2 æ›´æ–°è„šæœ¬éƒ¨åˆ†

ä¿®æ”¹ `<script>` éƒ¨åˆ†ï¼Œæ·»åŠ é€æ˜åº¦ç›¸å…³çš„å¯¼å…¥å’Œé€»è¾‘ï¼š

```svelte
<script lang="ts">
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";
import Icon from "@iconify/svelte";
import { 
	getDefaultHue, 
	getHue, 
	setHue, 
	getDefaultOpacity,    // ğŸ‘ˆ æ–°å¢å¯¼å…¥
	getOpacity,           // ğŸ‘ˆ æ–°å¢å¯¼å…¥
	setOpacity            // ğŸ‘ˆ æ–°å¢å¯¼å…¥
} from "@utils/setting-utils";

// ä¸»é¢˜è‰²ç›¸å…³
let hue = getHue();
const defaultHue = getDefaultHue();

// ğŸ‘‡ æ–°å¢ï¼šé€æ˜åº¦ç›¸å…³
let opacity = getOpacity();
const defaultOpacity = getDefaultOpacity();

// é‡ç½®ä¸»é¢˜è‰²
function resetHue() {
	hue = getDefaultHue();
}

// ğŸ‘‡ æ–°å¢ï¼šé‡ç½®é€æ˜åº¦
function resetOpacity() {
	opacity = getDefaultOpacity();
}

// å“åº”å¼è¯­å¥ï¼šå½“ hue æ”¹å˜æ—¶è‡ªåŠ¨è°ƒç”¨ setHue
$: if (hue || hue === 0) {
	setHue(hue);
}

// ğŸ‘‡ æ–°å¢ï¼šå“åº”å¼è¯­å¥ï¼šå½“ opacity æ”¹å˜æ—¶è‡ªåŠ¨è°ƒç”¨ setOpacity
$: if (opacity !== undefined) {
	setOpacity(opacity);
}
</script>
```

**ä»£ç è¯¦è§£ï¼š**

1. **å¯¼å…¥è¯­å¥**ï¼š
   - `getDefaultOpacity`ï¼šè·å–é»˜è®¤é€æ˜åº¦å€¼
   - `getOpacity`ï¼šä» localStorage è¯»å–é€æ˜åº¦
   - `setOpacity`ï¼šè®¾ç½®å¹¶åº”ç”¨é€æ˜åº¦

2. **å“åº”å¼å˜é‡**ï¼š
   - `let opacity = getOpacity()`ï¼šåˆ›å»ºå“åº”å¼å˜é‡ï¼Œåˆå§‹å€¼ä¸ºä¿å­˜çš„é€æ˜åº¦
   - `const defaultOpacity = getDefaultOpacity()`ï¼šé»˜è®¤å€¼å¸¸é‡ï¼Œç”¨äºé‡ç½®æŒ‰é’®çš„æ˜¾ç¤ºé€»è¾‘

3. **é‡ç½®å‡½æ•°**ï¼š
   - `resetOpacity()`ï¼šå°†é€æ˜åº¦é‡ç½®ä¸ºé»˜è®¤å€¼ï¼ˆ1.0ï¼‰
   - å½“ç”¨æˆ·ç‚¹å‡»é‡ç½®æŒ‰é’®æ—¶è°ƒç”¨

4. **å“åº”å¼è¯­å¥ï¼ˆReactive Statementsï¼‰**ï¼š
   - `$: if (opacity !== undefined) { setOpacity(opacity); }`
   - è¿™æ˜¯ Svelte çš„å“åº”å¼è¯­æ³•ï¼Œå½“ `opacity` å˜é‡æ”¹å˜æ—¶è‡ªåŠ¨æ‰§è¡Œ
   - `!== undefined` æ£€æŸ¥ç¡®ä¿å€¼æœ‰æ•ˆ
   - è¿™æ ·å½“ç”¨æˆ·æ‹–åŠ¨æ»‘å—æ—¶ï¼Œ`opacity` å€¼æ”¹å˜ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ `setOpacity()` æ›´æ–° CSS å˜é‡

**Svelte å“åº”å¼è¯­å¥è¯´æ˜ï¼š**

```svelte
$: if (æ¡ä»¶) {
    // å½“æ¡ä»¶æ»¡è¶³æ—¶æ‰§è¡Œ
}
```

- `$:` æ˜¯ Svelte çš„ç‰¹æ®Šè¯­æ³•ï¼Œè¡¨ç¤ºå“åº”å¼è¯­å¥
- å½“è¯­å¥ä¸­å¼•ç”¨çš„å˜é‡ï¼ˆå¦‚ `opacity`ï¼‰æ”¹å˜æ—¶ï¼Œè¯­å¥ä¼šè‡ªåŠ¨é‡æ–°æ‰§è¡Œ
- è¿™ç›¸å½“äº Vue çš„ `watch` æˆ– React çš„ `useEffect`

**ä¸ºä»€ä¹ˆéœ€è¦ `!== undefined` æ£€æŸ¥ï¼Ÿ**

- åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œ`opacity` å¯èƒ½æš‚æ—¶æ˜¯ `undefined`
- å¦‚æœä¸æ£€æŸ¥ï¼Œå¯èƒ½ä¼šåœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨ `setOpacity(undefined)`ï¼Œå¯¼è‡´é”™è¯¯
- è¿™ä¸ªæ£€æŸ¥ç¡®ä¿åªåœ¨å€¼æœ‰æ•ˆæ—¶æ‰æ‰§è¡Œ

#### 3.3 æ·»åŠ é€æ˜åº¦æ»‘å— UI

åœ¨ä¸»é¢˜è‰²æ»‘å—ä¸‹æ–¹æ·»åŠ é€æ˜åº¦æ§åˆ¶éƒ¨åˆ†ã€‚æ‰¾åˆ°ä¸»é¢˜è‰²æ»‘å—çš„ç»“æŸä½ç½®ï¼ˆ`</div>` æ ‡ç­¾ï¼‰ï¼Œåœ¨å…¶åæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```svelte
<div id="display-setting" class="float-panel float-panel-closed absolute transition-all w-80 right-4 px-4 py-4">
    <!-- ========== ä¸»é¢˜è‰²éƒ¨åˆ† ========== -->
    <div class="flex flex-row gap-2 mb-3 items-center justify-between">
        <div class="flex gap-2 font-bold text-lg text-neutral-900 dark:text-neutral-100 transition relative ml-3
            before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
            before:absolute before:-left-3 before:top-[0.33rem]"
        >
            {i18n(I18nKey.themeColor)}
            <button aria-label="Reset to Default" class="btn-regular w-7 h-7 rounded-md active:scale-90 will-change-transform"
                    class:opacity-0={hue === defaultHue} 
                    class:pointer-events-none={hue === defaultHue} 
                    on:click={resetHue}>
                <div class="text-[var(--btn-content)]">
                    <Icon icon="fa6-solid:arrow-rotate-left" class="text-[0.875rem]"></Icon>
                </div>
            </button>
        </div>
        <div class="flex gap-1">
            <div id="hueValue" class="transition bg-[var(--btn-regular-bg)] w-10 h-7 rounded-md flex justify-center
            font-bold text-sm items-center text-[var(--btn-content)]">
                {hue}
            </div>
        </div>
    </div>
    <div class="w-full h-6 px-1 bg-[oklch(0.80_0.10_0)] dark:bg-[oklch(0.70_0.10_0)] rounded select-none mb-4">
        <input aria-label={i18n(I18nKey.themeColor)} type="range" min="0" max="360" bind:value={hue}
               class="slider" id="colorSlider" step="5" style="width: 100%">
    </div>
    
    <!-- ========== é€æ˜åº¦éƒ¨åˆ†ï¼ˆæ–°å¢ï¼‰ ========== -->
    <div class="flex flex-row gap-2 mb-3 items-center justify-between">
        <!-- æ ‡é¢˜å’Œé‡ç½®æŒ‰é’® -->
        <div class="flex gap-2 font-bold text-lg text-neutral-900 dark:text-neutral-100 transition relative ml-3
            before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
            before:absolute before:-left-3 before:top-[0.33rem]"
        >
            {i18n(I18nKey.panelOpacity)}
            <button 
                aria-label="Reset to Default" 
                class="btn-regular w-7 h-7 rounded-md active:scale-90 will-change-transform"
                class:opacity-0={opacity === defaultOpacity} 
                class:pointer-events-none={opacity === defaultOpacity} 
                on:click={resetOpacity}
            >
                <div class="text-[var(--btn-content)]">
                    <Icon icon="fa6-solid:arrow-rotate-left" class="text-[0.875rem]"></Icon>
                </div>
            </button>
        </div>
        <!-- å½“å‰å€¼æ˜¾ç¤º -->
        <div class="flex gap-1">
            <div id="opacityValue" class="transition bg-[var(--btn-regular-bg)] w-12 h-7 rounded-md flex justify-center
            font-bold text-sm items-center text-[var(--btn-content)]">
                {Math.round(opacity * 100)}%
            </div>
        </div>
    </div>
    <!-- é€æ˜åº¦æ»‘å— -->
    <div class="w-full h-6 px-1 bg-gradient-to-r from-black/10 via-black/50 to-black/90 dark:from-white/10 dark:via-white/50 dark:to-white/90 rounded select-none">
        <input 
            aria-label={i18n(I18nKey.panelOpacity)} 
            type="range" 
            min="0" 
            max="1" 
            bind:value={opacity}
            class="slider opacity-slider" 
            id="opacitySlider" 
            step="0.01" 
            style="width: 100%"
        >
    </div>
</div>
```

**UI ç»“æ„è¯¦è§£ï¼š**

1. **æ ‡é¢˜è¡Œ**ï¼š
   ```svelte
   <div class="flex flex-row gap-2 mb-3 items-center justify-between">
   ```
   - `flex flex-row`ï¼šæ°´å¹³å¸ƒå±€
   - `gap-2`ï¼šå…ƒç´ é—´è·
   - `mb-3`ï¼šåº•éƒ¨å¤–è¾¹è·
   - `items-center`ï¼šå‚ç›´å±…ä¸­å¯¹é½
   - `justify-between`ï¼šä¸¤ç«¯å¯¹é½

2. **æ ‡é¢˜å’Œé‡ç½®æŒ‰é’®**ï¼š
   ```svelte
   <div class="flex gap-2 font-bold text-lg ...">
       {i18n(I18nKey.panelOpacity)}
       <button ...>
   ```
   - ä½¿ç”¨ `i18n()` å‡½æ•°æ˜¾ç¤ºç¿»è¯‘æ–‡æœ¬
   - é‡ç½®æŒ‰é’®ä½¿ç”¨æ¡ä»¶ç±»ï¼š`class:opacity-0={opacity === defaultOpacity}`
   - å½“é€æ˜åº¦ç­‰äºé»˜è®¤å€¼æ—¶ï¼ŒæŒ‰é’®é€æ˜ä¸”ä¸å¯ç‚¹å‡»

3. **å½“å‰å€¼æ˜¾ç¤º**ï¼š
   ```svelte
   <div id="opacityValue">
       {Math.round(opacity * 100)}%
   </div>
   ```
   - `Math.round(opacity * 100)`ï¼šå°† 0-1 çš„å€¼è½¬æ¢ä¸º 0-100 çš„ç™¾åˆ†æ¯”
   - `Math.round()` å››èˆäº”å…¥ï¼Œæ˜¾ç¤ºæ•´æ•°ç™¾åˆ†æ¯”
   - ä¾‹å¦‚ï¼š`0.75` â†’ `75%`ï¼Œ`0.123` â†’ `12%`

4. **æ»‘å—å®¹å™¨**ï¼š
   ```svelte
   <div class="... bg-gradient-to-r from-black/10 via-black/50 to-black/90 ...">
   ```
   - `bg-gradient-to-r`ï¼šä»å·¦åˆ°å³çš„æ¸å˜
   - `from-black/10`ï¼šèµ·å§‹é¢œè‰²ï¼ˆ10% é»‘è‰²ï¼Œå³æµ…ç°ï¼‰
   - `via-black/50`ï¼šä¸­é—´é¢œè‰²ï¼ˆ50% é»‘è‰²ï¼Œå³ä¸­ç°ï¼‰
   - `to-black/90`ï¼šç»“æŸé¢œè‰²ï¼ˆ90% é»‘è‰²ï¼Œå³æ·±ç°ï¼‰
   - æš—è‰²æ¨¡å¼ä½¿ç”¨ç™½è‰²æ¸å˜ï¼š`dark:from-white/10 dark:via-white/50 dark:to-white/90`
   - è¿™ä¸ªæ¸å˜èƒŒæ™¯ç›´è§‚åœ°è¡¨ç¤ºé€æ˜åº¦çš„èŒƒå›´ï¼ˆä»é€æ˜åˆ°ä¸é€æ˜ï¼‰

5. **æ»‘å—è¾“å…¥**ï¼š
   ```svelte
   <input 
       type="range"           // HTML5 èŒƒå›´è¾“å…¥æ§ä»¶
       min="0"                // æœ€å°å€¼ï¼ˆå®Œå…¨é€æ˜ï¼‰
       max="1"                // æœ€å¤§å€¼ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰
       bind:value={opacity}   // Svelte åŒå‘ç»‘å®š
       step="0.01"            // æ­¥é•¿ï¼ˆ1%ï¼‰
   >
   ```
   - `type="range"`ï¼šHTML5 èŒƒå›´æ»‘å—
   - `min="0"` å’Œ `max="1"`ï¼šå®šä¹‰èŒƒå›´
   - `bind:value={opacity}`ï¼šSvelte çš„åŒå‘ç»‘å®šï¼Œæ»‘å—å€¼æ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–° `opacity` å˜é‡
   - `step="0.01"`ï¼šæ¯æ¬¡æ‹–åŠ¨çš„æœ€å°æ­¥é•¿ï¼ˆ1%ï¼‰
   - `aria-label`ï¼šæ— éšœç¢æ ‡ç­¾ï¼Œå±å¹•é˜…è¯»å™¨ä¼šè¯»å–

**æ ·å¼è¯´æ˜ï¼š**

- é€æ˜åº¦éƒ¨åˆ†çš„æ ·å¼ä¸ä¸»é¢˜è‰²éƒ¨åˆ†ä¿æŒä¸€è‡´ï¼Œç¡®ä¿ UI ç»Ÿä¸€
- ä½¿ç”¨ Tailwind CSS çš„å·¥å…·ç±»ï¼Œæ— éœ€é¢å¤– CSS
- æ¸å˜èƒŒæ™¯æä¾›è§†è§‰åé¦ˆï¼Œè®©ç”¨æˆ·ç›´è§‚ç†è§£é€æ˜åº¦çš„å«ä¹‰

**å®Œæ•´ç»„ä»¶ä»£ç ç¤ºä¾‹ï¼š**

å¦‚æœä½ éœ€è¦æŸ¥çœ‹å®Œæ•´çš„ç»„ä»¶ä»£ç ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ç»“æ„ï¼š

```svelte
<script lang="ts">
// ... è„šæœ¬éƒ¨åˆ†ï¼ˆè§ 3.2 èŠ‚ï¼‰
</script>

<div id="display-setting" class="float-panel float-panel-closed absolute transition-all w-80 right-4 px-4 py-4">
    <!-- ä¸»é¢˜è‰²éƒ¨åˆ† -->
    <!-- ... ç°æœ‰ä»£ç  ... -->
    
    <!-- é€æ˜åº¦éƒ¨åˆ† -->
    <!-- ... æ–°å¢ä»£ç ï¼ˆè§ä¸Šæ–¹ï¼‰ ... -->
</div>

<style lang="stylus">
    /* ç°æœ‰æ ·å¼ä¿æŒä¸å˜ */
    #display-setting
      input[type="range"]
        /* ... ç°æœ‰æ ·å¼ ... */
</style>
```

### ç¬¬å››æ­¥ï¼šæ·»åŠ åˆå§‹åŒ–ä»£ç 

åœ¨ `src/layouts/Layout.astro` ä¸­æ·»åŠ é€æ˜åº¦åˆå§‹åŒ–ã€‚è¿™ä¸€æ­¥ç¡®ä¿é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åº”ç”¨ä¿å­˜çš„é€æ˜åº¦è®¾ç½®ã€‚

#### 4.1 æŸ¥çœ‹ç°æœ‰å¯¼å…¥è¯­å¥

æ‰“å¼€ `src/layouts/Layout.astro`ï¼Œæ‰¾åˆ°æ–‡ä»¶é¡¶éƒ¨çš„å¯¼å…¥è¯­å¥éƒ¨åˆ†ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```typescript
import {getHue, getStoredTheme, setHue, setTheme} from "../utils/setting-utils";
```

#### 4.2 æ›´æ–°å¯¼å…¥è¯­å¥

åœ¨å¯¼å…¥è¯­å¥ä¸­æ·»åŠ é€æ˜åº¦ç›¸å…³çš„å‡½æ•°ï¼š

```typescript
import {
	getHue, 
	getStoredTheme, 
	setHue, 
	setTheme, 
	getOpacity,    // ğŸ‘ˆ æ–°å¢
	setOpacity     // ğŸ‘ˆ æ–°å¢
} from "../utils/setting-utils";
```

**ä»£ç è¯´æ˜ï¼š**
- `getOpacity`ï¼šç”¨äºè¯»å–ä¿å­˜çš„é€æ˜åº¦å€¼
- `setOpacity`ï¼šç”¨äºåº”ç”¨é€æ˜åº¦è®¾ç½®
- è¿™äº›å‡½æ•°ä¸ `getHue`ã€`setHue` ç­‰å‡½æ•°æ¥è‡ªåŒä¸€ä¸ªæ–‡ä»¶

#### 4.3 æŸ¥çœ‹ç°æœ‰åŠ è½½å‡½æ•°

æ‰¾åˆ° `loadHue` å‡½æ•°çš„ä½ç½®ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```typescript
function loadHue() {
	setHue(getHue())
}
```

#### 4.4 æ·»åŠ é€æ˜åº¦åŠ è½½å‡½æ•°

åœ¨ `loadHue` å‡½æ•°ä¹‹åæ·»åŠ é€æ˜åº¦åŠ è½½å‡½æ•°ï¼š

```typescript
function loadHue() {
	setHue(getHue())
}

// ğŸ‘‡ æ–°å¢ï¼šåŠ è½½é€æ˜åº¦è®¾ç½®
function loadOpacity() {
	setOpacity(getOpacity())
}
```

**ä»£ç è¯´æ˜ï¼š**
- `loadOpacity()` å‡½æ•°çš„ä½œç”¨æ˜¯åœ¨é¡µé¢åŠ è½½æ—¶è¯»å–å¹¶åº”ç”¨ä¿å­˜çš„é€æ˜åº¦è®¾ç½®
- å‡½æ•°å†…éƒ¨å…ˆè°ƒç”¨ `getOpacity()` è·å–ä¿å­˜çš„å€¼ï¼ˆå¦‚æœæ²¡æœ‰åˆ™è¿”å›é»˜è®¤å€¼ 1.0ï¼‰
- ç„¶åè°ƒç”¨ `setOpacity()` åº”ç”¨è¿™ä¸ªå€¼ï¼Œè¿™ä¼šæ›´æ–° CSS å˜é‡

**ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ**

- å½“ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼Œ`localStorage` ä¸­çš„æ•°æ®ä»ç„¶å­˜åœ¨
- ä½†æ˜¯ CSS å˜é‡ä¼šè¢«é‡ç½®ä¸º Stylus ä¸­å®šä¹‰çš„é»˜è®¤å€¼
- å› æ­¤éœ€è¦åœ¨é¡µé¢åŠ è½½æ—¶é‡æ–°åº”ç”¨ä¿å­˜çš„é€æ˜åº¦è®¾ç½®

#### 4.5 åœ¨åˆå§‹åŒ–å‡½æ•°ä¸­è°ƒç”¨

æ‰¾åˆ° `init()` å‡½æ•°ï¼Œåœ¨ `loadHue()` ä¹‹åæ·»åŠ  `loadOpacity()` çš„è°ƒç”¨ï¼š

```typescript
function init() {
	// disableAnimation()()		// TODO
	loadTheme();      // åŠ è½½ä¸»é¢˜è®¾ç½®
	loadHue();        // åŠ è½½è‰²ç›¸è®¾ç½®
	loadOpacity();    // ğŸ‘ˆ æ–°å¢ï¼šåŠ è½½é€æ˜åº¦è®¾ç½®
	initCustomScrollbar();
	showBanner();
}
```

**åˆå§‹åŒ–é¡ºåºè¯´æ˜ï¼š**

1. `loadTheme()`ï¼šå…ˆåŠ è½½ä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²ï¼‰ï¼Œå› ä¸ºé€æ˜åº¦è®¡ç®—ä¾èµ–äºä¸»é¢˜æ¨¡å¼
2. `loadHue()`ï¼šåŠ è½½è‰²ç›¸è®¾ç½®
3. `loadOpacity()`ï¼šæœ€ååŠ è½½é€æ˜åº¦ï¼Œè¿™æ ·èƒ½ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ä¸»é¢˜æ¨¡å¼è®¡ç®—é¢œè‰²

**å®Œæ•´çš„åˆå§‹åŒ–æµç¨‹ï¼š**

```
é¡µé¢åŠ è½½
  â†“
init() è¢«è°ƒç”¨
  â†“
loadTheme()  â† è®¾ç½®ä¸»é¢˜æ¨¡å¼ï¼ˆäº®è‰²/æš—è‰²ï¼‰
  â†“
loadHue()    â† è®¾ç½®è‰²ç›¸å€¼
  â†“
loadOpacity()  â† è¯»å–é€æ˜åº¦å¹¶åº”ç”¨
  â†“
getOpacity()   â† ä» localStorage è¯»å–ï¼ˆå¦‚ "0.5"ï¼‰
  â†“
setOpacity(0.5)  â† åº”ç”¨é€æ˜åº¦
  â†“
æ ¹æ®å½“å‰ä¸»é¢˜æ¨¡å¼è®¡ç®—é¢œè‰²
  â†“
è®¾ç½® CSS å˜é‡ï¼ˆå¦‚ --card-bg: rgba(255, 255, 255, 0.5)ï¼‰
  â†“
é¡µé¢æ˜¾ç¤ºæ­£ç¡®çš„é€æ˜åº¦
```

**éªŒè¯åˆå§‹åŒ–ï¼š**

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. **è®¾ç½®é€æ˜åº¦**ï¼šåœ¨ Theme Color é¢æ¿ä¸­è®¾ç½®é€æ˜åº¦ä¸º 50%
2. **åˆ·æ–°é¡µé¢**ï¼šæŒ‰ F5 æˆ– Ctrl+R åˆ·æ–°é¡µé¢
3. **æ£€æŸ¥æ•ˆæœ**ï¼šé¢æ¿åº”è¯¥ä¿æŒ 50% çš„é€æ˜åº¦ï¼Œè€Œä¸æ˜¯é‡ç½®ä¸º 100%
4. **æ£€æŸ¥æ§åˆ¶å°**ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å…¥ï¼š
   ```javascript
   localStorage.getItem('panelOpacity')  // åº”è¯¥è¿”å› "0.5"
   getComputedStyle(document.documentElement).getPropertyValue('--card-bg')
   // åº”è¯¥è¿”å›ç±»ä¼¼ "rgba(255, 255, 255, 0.5)" çš„å€¼
   ```

**å¸¸è§é—®é¢˜ï¼š**

- âŒ åˆ·æ–°åé€æ˜åº¦é‡ç½®ä¸º 100%
  - æ£€æŸ¥ `loadOpacity()` æ˜¯å¦åœ¨ `init()` ä¸­è¢«è°ƒç”¨
  - æ£€æŸ¥ `getOpacity()` æ˜¯å¦èƒ½æ­£ç¡®è¯»å– `localStorage`
  - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

- âŒ é€æ˜åº¦è®¾ç½®åç«‹å³å¤±æ•ˆ
  - æ£€æŸ¥ `setOpacity()` å‡½æ•°æ˜¯å¦æ­£ç¡®è®¾ç½® CSS å˜é‡
  - æ£€æŸ¥ CSS å˜é‡åæ˜¯å¦æ­£ç¡®ï¼ˆ`--card-bg` å’Œ `--float-panel-bg`ï¼‰

- âŒ ä¸»é¢˜åˆ‡æ¢åé€æ˜åº¦ä¸æ­£ç¡®
  - æ£€æŸ¥ `applyThemeToDocument()` ä¸­æ˜¯å¦è°ƒç”¨äº† `applyOpacityOnThemeChange()`
  - æ£€æŸ¥ä¸»é¢˜åˆ‡æ¢åæ˜¯å¦æ­£ç¡®æ£€æµ‹åˆ°æš—è‰²/äº®è‰²æ¨¡å¼

## æµ‹è¯•å’ŒéªŒè¯

### åŠŸèƒ½æµ‹è¯•æ¸…å•

å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ¸…å•é€ä¸€æµ‹è¯•ï¼š

- [ ] **åŸºæœ¬åŠŸèƒ½**
  - [ ] é€æ˜åº¦æ»‘å—å¯ä»¥æ‹–åŠ¨
  - [ ] æ»‘å—å€¼æ”¹å˜æ—¶ï¼Œé¢æ¿é€æ˜åº¦å®æ—¶æ›´æ–°
  - [ ] å½“å‰å€¼æ˜¾ç¤ºæ¡†æ­£ç¡®æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼ˆ0-100%ï¼‰
  - [ ] é‡ç½®æŒ‰é’®å¯ä»¥æ¢å¤é»˜è®¤å€¼ï¼ˆ100%ï¼‰

- [ ] **æŒä¹…åŒ–**
  - [ ] è®¾ç½®é€æ˜åº¦ååˆ·æ–°é¡µé¢ï¼Œè®¾ç½®ä»ç„¶æœ‰æ•ˆ
  - [ ] å…³é—­æµè§ˆå™¨åé‡æ–°æ‰“å¼€ï¼Œè®¾ç½®ä»ç„¶æœ‰æ•ˆ
  - [ ] `localStorage` ä¸­æ­£ç¡®ä¿å­˜äº†é€æ˜åº¦å€¼

- [ ] **ä¸»é¢˜åˆ‡æ¢**
  - [ ] åœ¨äº®è‰²æ¨¡å¼ä¸‹è®¾ç½®é€æ˜åº¦ï¼Œåˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼åé€æ˜åº¦æ­£ç¡®
  - [ ] åœ¨æš—è‰²æ¨¡å¼ä¸‹è®¾ç½®é€æ˜åº¦ï¼Œåˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼åé€æ˜åº¦æ­£ç¡®
  - [ ] åˆ‡æ¢ä¸»é¢˜æ—¶ï¼ŒèƒŒæ™¯é¢œè‰²æ­£ç¡®æ›´æ–°ï¼ˆäº®è‰²ç”¨ç™½è‰²ï¼Œæš—è‰²ç”¨ç°è‰²ï¼‰

- [ ] **è‰²ç›¸æ”¹å˜**
  - [ ] æ”¹å˜è‰²ç›¸åï¼Œé€æ˜åº¦è®¾ç½®ä¿æŒä¸å˜
  - [ ] æ”¹å˜è‰²ç›¸åï¼ŒèƒŒæ™¯é¢œè‰²æ­£ç¡®æ›´æ–°

- [ ] **UI äº¤äº’**
  - [ ] é‡ç½®æŒ‰é’®åœ¨é€æ˜åº¦ä¸º 100% æ—¶éšè—ï¼ˆé€æ˜ä¸”ä¸å¯ç‚¹å‡»ï¼‰
  - [ ] é€æ˜åº¦æ»‘å—æœ‰æ¸å˜èƒŒæ™¯ï¼Œè§†è§‰æ•ˆæœè‰¯å¥½
  - [ ] æ‰€æœ‰æ–‡æœ¬æ­£ç¡®æ˜¾ç¤ºï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰

### è°ƒè¯•æŠ€å·§

#### 1. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

**æ£€æŸ¥ CSS å˜é‡ï¼š**

```javascript
// åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œ
getComputedStyle(document.documentElement).getPropertyValue('--card-bg')
getComputedStyle(document.documentElement).getPropertyValue('--float-panel-bg')
```

**æ£€æŸ¥ localStorageï¼š**

```javascript
localStorage.getItem('panelOpacity')
localStorage.getItem('hue')
localStorage.getItem('theme')
```

**æ£€æŸ¥ä¸»é¢˜æ¨¡å¼ï¼š**

```javascript
document.documentElement.classList.contains('dark')  // true = æš—è‰²æ¨¡å¼
```

#### 2. æ·»åŠ è°ƒè¯•æ—¥å¿—

åœ¨ `setOpacity` å‡½æ•°ä¸­æ·»åŠ  `console.log`ï¼š

```typescript
export function setOpacity(opacity: number): void {
	console.log('è®¾ç½®é€æ˜åº¦:', opacity);  // ğŸ‘ˆ è°ƒè¯•æ—¥å¿—
	localStorage.setItem("panelOpacity", String(opacity));
	const r = document.querySelector(":root") as HTMLElement;
	if (!r) {
		console.error('æ— æ³•è·å–æ ¹å…ƒç´ ');  // ğŸ‘ˆ é”™è¯¯æ—¥å¿—
		return;
	}
	const isDark = r.classList.contains("dark");
	console.log('å½“å‰ä¸»é¢˜æ¨¡å¼:', isDark ? 'æš—è‰²' : 'äº®è‰²');  // ğŸ‘ˆ è°ƒè¯•æ—¥å¿—
	
	// ... å…¶ä½™ä»£ç 
}
```

#### 3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚

å¦‚æœä½¿ç”¨å¼€å‘æœåŠ¡å™¨ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯ï¼š
- æŸ¥çœ‹ç»ˆç«¯/æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯
- ç¡®è®¤æ‰€æœ‰æ–‡ä»¶éƒ½å·²ä¿å­˜

#### 4. é€æ­¥éªŒè¯

å¦‚æœåŠŸèƒ½ä¸å·¥ä½œï¼Œå¯ä»¥é€æ­¥éªŒè¯ï¼š

1. **éªŒè¯å›½é™…åŒ–**ï¼š
   ```svelte
   {i18n(I18nKey.panelOpacity)}  // åº”è¯¥æ˜¾ç¤º "é¢æ¿é€æ˜åº¦" æˆ– "Panel Opacity"
   ```

2. **éªŒè¯å‡½æ•°å¯¼å…¥**ï¼š
   ```svelte
   // åœ¨ç»„ä»¶ä¸­ä¸´æ—¶æ·»åŠ 
   console.log(getOpacity());  // åº”è¯¥è¾“å‡ºæ•°å­—
   ```

3. **éªŒè¯å“åº”å¼ç»‘å®š**ï¼š
   ```svelte
   // åœ¨ç»„ä»¶ä¸­ä¸´æ—¶æ·»åŠ 
   $: console.log('é€æ˜åº¦æ”¹å˜:', opacity);
   ```

## æŠ€æœ¯ç»†èŠ‚

### ä¸ºä»€ä¹ˆä¸ç”¨ CSS `opacity` å±æ€§ï¼Ÿ

ä½¿ç”¨ CSS `opacity` å±æ€§ä¼šå½±å“å…ƒç´ åŠå…¶æ‰€æœ‰å­å…ƒç´ çš„é€æ˜åº¦ï¼Œè¿™é€šå¸¸ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚

**å¯¹æ¯”ç¤ºä¾‹ï¼š**

```css
/* æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ opacityï¼ˆä¸æ¨èï¼‰ */
.panel {
    background-color: white;
    opacity: 0.5;  /* æ•´ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬å­å…ƒç´ ï¼‰éƒ½å˜é€æ˜ */
}

/* æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ rgba() alphaï¼ˆæ¨èï¼‰ */
.panel {
    background-color: rgba(255, 255, 255, 0.5);  /* åªæœ‰èƒŒæ™¯å˜é€æ˜ */
}
```

**å®é™…æ•ˆæœå¯¹æ¯”ï¼š**

| æ–¹æ¡ˆ | èƒŒæ™¯ | æ–‡å­— | æŒ‰é’® | å›¾æ ‡ |
|------|------|------|------|------|
| `opacity: 0.5` | 50% é€æ˜ | 50% é€æ˜ âŒ | 50% é€æ˜ âŒ | 50% é€æ˜ âŒ |
| `rgba(..., 0.5)` | 50% é€æ˜ âœ… | 100% ä¸é€æ˜ âœ… | 100% ä¸é€æ˜ âœ… | 100% ä¸é€æ˜ âœ… |

å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ `rgba()` çš„ alpha é€šé“ï¼Œåªè®©èƒŒæ™¯å˜é€æ˜ï¼Œä¿æŒå­å…ƒç´ çš„å¯è¯»æ€§ã€‚

### é¢œè‰²è½¬æ¢è¯´æ˜

åœ¨æš—è‰²æ¨¡å¼ä¸‹ï¼ŒåŸå§‹é¢œè‰²å®šä¹‰ä½¿ç”¨çš„æ˜¯ `oklch()` é¢œè‰²ç©ºé—´ï¼š

```stylus
--card-bg: white oklch(0.23 0.015 var(--hue))
--float-panel-bg: white oklch(0.19 0.015 var(--hue))
```

ä¸ºäº†ç®€åŒ–å®ç°ï¼Œæˆ‘ä»¬å°† `oklch` çš„ lightness å€¼ï¼ˆ0.23 å’Œ 0.19ï¼‰è½¬æ¢ä¸ºç°åº¦å€¼ï¼š

```typescript
const gray = Math.round(0.23 * 255);  // çº¦ç­‰äº 59
const grayPanel = Math.round(0.19 * 255);  // çº¦ç­‰äº 48
```

ç„¶åä½¿ç”¨ `rgba()` æ ¼å¼å¹¶åº”ç”¨é€æ˜åº¦ï¼š

```typescript
rgba(59, 59, 59, opacity)  // card-bg
rgba(48, 48, 48, opacity)  // float-panel-bg
```

> **æ³¨æ„**ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„è½¬æ¢ã€‚å®Œæ•´çš„ `oklch` åˆ° `rgba` è½¬æ¢éœ€è¦è€ƒè™‘ chromaï¼ˆé¥±å’Œåº¦ï¼‰å’Œ hueï¼ˆè‰²ç›¸ï¼‰çš„å½±å“ã€‚å¦‚æœéœ€è¦æ›´ç²¾ç¡®çš„é¢œè‰²è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„é¢œè‰²è½¬æ¢åº“ã€‚

### è‡ªåŠ¨åŒæ­¥æœºåˆ¶

ä¸ºäº†ç¡®ä¿é€æ˜åº¦è®¾ç½®åœ¨ä¸åŒåœºæ™¯ä¸‹éƒ½èƒ½æ­£ç¡®åº”ç”¨ï¼Œæˆ‘ä»¬å®ç°äº†ä»¥ä¸‹è‡ªåŠ¨åŒæ­¥æœºåˆ¶ï¼š

1. **ä¸»é¢˜åˆ‡æ¢æ—¶**ï¼šåœ¨ `applyThemeToDocument` ä¸­è°ƒç”¨ `applyOpacityOnThemeChange()`
2. **è‰²ç›¸æ”¹å˜æ—¶**ï¼šåœ¨ `setHue` ä¸­è°ƒç”¨ `applyOpacityOnThemeChange()`
3. **é¡µé¢åŠ è½½æ—¶**ï¼šåœ¨ `init()` ä¸­è°ƒç”¨ `loadOpacity()`

## ä½¿ç”¨æ•ˆæœ

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œç”¨æˆ·å¯ä»¥åœ¨ Theme Color é¢æ¿ä¸­ï¼š

1. **è°ƒèŠ‚é€æ˜åº¦æ»‘å—**ï¼šèŒƒå›´ä» 0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰
2. **æŸ¥çœ‹å½“å‰å€¼**ï¼šæ»‘å—å³ä¾§æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼ˆ0-100%ï¼‰
3. **é‡ç½®ä¸ºé»˜è®¤å€¼**ï¼šç‚¹å‡»é‡ç½®æŒ‰é’®æ¢å¤ä¸º 100% ä¸é€æ˜
4. **è‡ªåŠ¨ä¿å­˜**ï¼šè®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ° localStorageï¼Œåˆ·æ–°é¡µé¢åä»ç„¶æœ‰æ•ˆ

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: æ»‘å—æ‹–åŠ¨æ—¶æ²¡æœ‰ååº”ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. å“åº”å¼è¯­å¥æ²¡æœ‰æ­£ç¡®ç»‘å®š
2. `setOpacity` å‡½æ•°æœ‰é”™è¯¯
3. CSS å˜é‡åä¸æ­£ç¡®

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- ç¡®è®¤ `bind:value={opacity}` æ­£ç¡®ç»‘å®š
- ç¡®è®¤å“åº”å¼è¯­å¥ `$: if (opacity !== undefined) { setOpacity(opacity); }` å­˜åœ¨

### Q2: åˆ·æ–°é¡µé¢åé€æ˜åº¦é‡ç½®ä¸º 100%ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. `loadOpacity()` æ²¡æœ‰åœ¨ `init()` ä¸­è°ƒç”¨
2. `localStorage` è¢«ç¦ç”¨æˆ–æ¸…é™¤
3. `getOpacity()` å‡½æ•°è¿”å›é»˜è®¤å€¼

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ `Layout.astro` ä¸­çš„ `init()` å‡½æ•°
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸ `localStorage`
- åœ¨æ§åˆ¶å°æ‰§è¡Œ `localStorage.getItem('panelOpacity')` æŸ¥çœ‹æ˜¯å¦æœ‰å€¼

### Q3: ä¸»é¢˜åˆ‡æ¢åé€æ˜åº¦ä¸æ­£ç¡®ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. `applyThemeToDocument()` ä¸­æ²¡æœ‰è°ƒç”¨ `applyOpacityOnThemeChange()`
2. ä¸»é¢˜æ£€æµ‹é€»è¾‘æœ‰è¯¯

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ `applyThemeToDocument()` å‡½æ•°
- ç¡®è®¤ `isDark` å˜é‡æ­£ç¡®æ£€æµ‹ä¸»é¢˜æ¨¡å¼
- æ·»åŠ è°ƒè¯•æ—¥å¿—æŸ¥çœ‹ä¸»é¢˜åˆ‡æ¢æ—¶çš„æ‰§è¡Œæµç¨‹

### Q4: æš—è‰²æ¨¡å¼ä¸‹çš„é¢œè‰²ä¸å¯¹ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. é¢œè‰²è½¬æ¢è®¡ç®—æœ‰è¯¯
2. CSS å˜é‡æ²¡æœ‰è¢«æ­£ç¡®è¦†ç›–

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ `setOpacity()` ä¸­çš„é¢œè‰²è®¡ç®—é€»è¾‘
- ç¡®è®¤ `r.style.setProperty()` æ­£ç¡®æ‰§è¡Œ
- ä½¿ç”¨å¼€å‘è€…å·¥å…·æ£€æŸ¥ CSS å˜é‡çš„å®é™…å€¼

### Q5: é‡ç½®æŒ‰é’®ä¸æ˜¾ç¤ºæˆ–ä¸å·¥ä½œï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. æ¡ä»¶ç±»ç»‘å®šæœ‰è¯¯
2. `defaultOpacity` å€¼ä¸æ­£ç¡®
3. æŒ‰é’®ç‚¹å‡»äº‹ä»¶æœªç»‘å®š

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ `class:opacity-0={opacity === defaultOpacity}` æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ `defaultOpacity` å€¼ä¸º 1.0
- æ£€æŸ¥ `on:click={resetOpacity}` æ˜¯å¦æ­£ç¡®ç»‘å®š

### Q6: å¦‚ä½•å®ç°æ›´ç²¾ç¡®çš„é¢œè‰²è½¬æ¢ï¼Ÿ

å¦‚æœéœ€è¦è€ƒè™‘ `oklch` çš„å®Œæ•´é¢œè‰²ä¿¡æ¯ï¼ˆåŒ…æ‹¬ chroma å’Œ hueï¼‰ï¼Œå¯ä»¥ä½¿ç”¨é¢œè‰²è½¬æ¢åº“ï¼š

```bash
npm install culori
```

ç„¶åä¿®æ”¹ `setOpacity()` å‡½æ•°ï¼š

```typescript
import { oklch, formatRgb } from 'culori';

export function setOpacity(opacity: number): void {
	// ... ä¿å­˜åˆ° localStorage ...
	
	const hue = getHue();
	const isDark = r.classList.contains("dark");
	
	if (isDark) {
		// ä½¿ç”¨ culori è¿›è¡Œç²¾ç¡®è½¬æ¢
		const cardColor = oklch({ l: 0.23, c: 0.015, h: hue });
		const rgb = formatRgb(cardColor);
		r.style.setProperty(
			"--card-bg",
			`rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${opacity})`,
		);
		// ... ç±»ä¼¼å¤„ç† float-panel-bg ...
	}
}
```

## æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½è€ƒè™‘**ï¼š
   - æ¯æ¬¡é€æ˜åº¦æ”¹å˜éƒ½ä¼šé‡æ–°è®¡ç®—å¹¶è®¾ç½® CSS å˜é‡
   - ä½†è¿™å¯¹æ€§èƒ½å½±å“å¾ˆå°ï¼Œå› ä¸ºæ“ä½œé¢‘ç‡ä½ï¼ˆç”¨æˆ·æ‹–åŠ¨æ»‘å—ï¼‰
   - å¦‚æœæ‹…å¿ƒæ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é˜²æŠ–ï¼ˆdebounceï¼‰é™åˆ¶æ›´æ–°é¢‘ç‡

2. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼š
   - `rgba()` é¢œè‰²æ ¼å¼æœ‰è‰¯å¥½çš„æµè§ˆå™¨æ”¯æŒï¼ˆIE9+ï¼‰
   - `localStorage` æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨
   - `CSS.supports()` å¯ä»¥æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒç‰¹å®š CSS ç‰¹æ€§

3. **é¢œè‰²ç²¾åº¦**ï¼š
   - å½“å‰å®ç°ç®€åŒ–äº† `oklch` åˆ° `rgba` çš„è½¬æ¢
   - åªä½¿ç”¨äº† lightnessï¼Œå¿½ç•¥äº† chroma å’Œ hue
   - å¦‚æœéœ€è¦æ›´ç²¾ç¡®çš„é¢œè‰²ï¼Œå¯ä»¥ä½¿ç”¨ `culori` ç­‰é¢œè‰²è½¬æ¢åº“

4. **å¤‡ä»½æ–‡ä»¶**ï¼š
   - åœ¨ä¿®æ”¹å‰å»ºè®®å¤‡ä»½ç›¸å…³æ–‡ä»¶
   - å¯ä»¥ä½¿ç”¨ Git æäº¤ä¿®æ”¹ï¼Œæ–¹ä¾¿å›é€€
   - æˆ–è€…æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶ä¸º `.backup` åç¼€

5. **ä»£ç ç»´æŠ¤**ï¼š
   - æ·»åŠ é€‚å½“çš„æ³¨é‡Šè¯´æ˜ä»£ç æ„å›¾
   - ä¿æŒä»£ç é£æ ¼ä¸é¡¹ç›®ä¸€è‡´
   - è€ƒè™‘æ·»åŠ  TypeScript ç±»å‹æ³¨è§£æé«˜ä»£ç å¯è¯»æ€§

6. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - æ»‘å—æ­¥é•¿è®¾ç½®ä¸º 0.01ï¼ˆ1%ï¼‰æä¾›ç²¾ç»†æ§åˆ¶
   - æ˜¾ç¤ºç™¾åˆ†æ¯”è®©ç”¨æˆ·ç›´è§‚äº†è§£å½“å‰å€¼
   - é‡ç½®æŒ‰é’®åœ¨é»˜è®¤å€¼æ—¶éšè—ï¼Œé¿å…æ··æ·†

## æ‰©å±•å»ºè®®

å¦‚æœéœ€è¦æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **é¢„è®¾é€æ˜åº¦å€¼**ï¼šæä¾›å‡ ä¸ªé¢„è®¾çš„é€æ˜åº¦é€‰é¡¹ï¼ˆå¦‚ 100%ã€75%ã€50%ã€25%ï¼‰
2. **åŠ¨ç”»è¿‡æ¸¡**ï¼šåœ¨é€æ˜åº¦æ”¹å˜æ—¶æ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»
3. **åˆ†åˆ«æ§åˆ¶**ï¼šä¸ºä¸åŒç±»å‹çš„é¢æ¿ï¼ˆå¡ç‰‡ã€æµ®åŠ¨é¢æ¿ç­‰ï¼‰æä¾›ç‹¬ç«‹çš„é€æ˜åº¦æ§åˆ¶
4. **æ›´ç²¾ç¡®çš„é¢œè‰²è½¬æ¢**ï¼šä½¿ç”¨é¢œè‰²è½¬æ¢åº“å®ç°å®Œæ•´çš„ `oklch` åˆ° `rgba` è½¬æ¢

## å®Œæ•´ä»£ç æ¸…å•

ä¸ºäº†æ–¹ä¾¿å‚è€ƒï¼Œè¿™é‡Œæä¾›æ‰€æœ‰ä¿®æ”¹æ–‡ä»¶çš„å®Œæ•´ä»£ç ç‰‡æ®µï¼š

### 1. `src/i18n/i18nKey.ts`

```typescript
// ... å…¶ä»–ä»£ç  ...
themeColor = "themeColor",
panelOpacity = "panelOpacity",  // æ–°å¢
lightMode = "lightMode",
// ... å…¶ä»–ä»£ç  ...
```

### 2. `src/i18n/languages/zh_CN.ts`

```typescript
// ... å…¶ä»–ä»£ç  ...
[Key.themeColor]: "ä¸»é¢˜è‰²",
[Key.panelOpacity]: "é¢æ¿é€æ˜åº¦",  // æ–°å¢
[Key.lightMode]: "äº®è‰²",
// ... å…¶ä»–ä»£ç  ...
```

### 3. `src/i18n/languages/en.ts`

```typescript
// ... å…¶ä»–ä»£ç  ...
[Key.themeColor]: "Theme Color",
[Key.panelOpacity]: "Panel Opacity",  // æ–°å¢
[Key.lightMode]: "Light",
// ... å…¶ä»–ä»£ç  ...
```

### 4. `src/utils/setting-utils.ts`ï¼ˆæ–°å¢å‡½æ•°ï¼‰

```typescript
// åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å‡½æ•°

export function getDefaultOpacity(): number {
	return 1.0;
}

export function getOpacity(): number {
	const stored = localStorage.getItem("panelOpacity");
	return stored ? Number.parseFloat(stored) : getDefaultOpacity();
}

export function setOpacity(opacity: number): void {
	localStorage.setItem("panelOpacity", String(opacity));
	const r = document.querySelector(":root") as HTMLElement;
	if (!r) return;
	
	const isDark = r.classList.contains("dark");
	
	if (isDark) {
		const gray = Math.round(0.23 * 255);
		r.style.setProperty("--card-bg", `rgba(${gray}, ${gray}, ${gray}, ${opacity})`);
		const grayPanel = Math.round(0.19 * 255);
		r.style.setProperty("--float-panel-bg", `rgba(${grayPanel}, ${grayPanel}, ${grayPanel}, ${opacity})`);
	} else {
		r.style.setProperty("--card-bg", `rgba(255, 255, 255, ${opacity})`);
		r.style.setProperty("--float-panel-bg", `rgba(255, 255, 255, ${opacity})`);
	}
}

export function applyOpacityOnThemeChange(): void {
	const opacity = getOpacity();
	setOpacity(opacity);
}
```

### 5. `src/utils/setting-utils.ts`ï¼ˆä¿®æ”¹ç°æœ‰å‡½æ•°ï¼‰

```typescript
// ä¿®æ”¹ applyThemeToDocument å‡½æ•°ï¼Œåœ¨æœ«å°¾æ·»åŠ ï¼š
export function applyThemeToDocument(theme: LIGHT_DARK_MODE) {
	// ... ç°æœ‰ä»£ç  ...
	applyOpacityOnThemeChange();  // æ–°å¢
}

// ä¿®æ”¹ setHue å‡½æ•°ï¼Œåœ¨æœ«å°¾æ·»åŠ ï¼š
export function setHue(hue: number): void {
	// ... ç°æœ‰ä»£ç  ...
	applyOpacityOnThemeChange();  // æ–°å¢
}
```

### 6. `src/components/widget/DisplaySettings.svelte`ï¼ˆè„šæœ¬éƒ¨åˆ†ï¼‰

```svelte
<script lang="ts">
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";
import Icon from "@iconify/svelte";
import { 
	getDefaultHue, getHue, setHue, 
	getDefaultOpacity, getOpacity, setOpacity 
} from "@utils/setting-utils";

let hue = getHue();
const defaultHue = getDefaultHue();

let opacity = getOpacity();
const defaultOpacity = getDefaultOpacity();

function resetHue() {
	hue = getDefaultHue();
}

function resetOpacity() {
	opacity = getDefaultOpacity();
}

$: if (hue || hue === 0) {
	setHue(hue);
}

$: if (opacity !== undefined) {
	setOpacity(opacity);
}
</script>
```

### 7. `src/components/widget/DisplaySettings.svelte`ï¼ˆUI éƒ¨åˆ†ï¼‰

åœ¨ä¸»é¢˜è‰²æ»‘å—åæ·»åŠ ï¼š

```svelte
<!-- é€æ˜åº¦éƒ¨åˆ† -->
<div class="flex flex-row gap-2 mb-3 items-center justify-between">
    <div class="flex gap-2 font-bold text-lg text-neutral-900 dark:text-neutral-100 transition relative ml-3
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:-left-3 before:top-[0.33rem]">
        {i18n(I18nKey.panelOpacity)}
        <button aria-label="Reset to Default" 
                class="btn-regular w-7 h-7 rounded-md active:scale-90 will-change-transform"
                class:opacity-0={opacity === defaultOpacity} 
                class:pointer-events-none={opacity === defaultOpacity} 
                on:click={resetOpacity}>
            <div class="text-[var(--btn-content)]">
                <Icon icon="fa6-solid:arrow-rotate-left" class="text-[0.875rem]"></Icon>
            </div>
        </button>
    </div>
    <div class="flex gap-1">
        <div id="opacityValue" class="transition bg-[var(--btn-regular-bg)] w-12 h-7 rounded-md flex justify-center
        font-bold text-sm items-center text-[var(--btn-content)]">
            {Math.round(opacity * 100)}%
        </div>
    </div>
</div>
<div class="w-full h-6 px-1 bg-gradient-to-r from-black/10 via-black/50 to-black/90 dark:from-white/10 dark:via-white/50 dark:to-white/90 rounded select-none">
    <input aria-label={i18n(I18nKey.panelOpacity)} 
           type="range" min="0" max="1" bind:value={opacity}
           class="slider opacity-slider" id="opacitySlider" step="0.01" style="width: 100%">
</div>
```

### 8. `src/layouts/Layout.astro`ï¼ˆä¿®æ”¹éƒ¨åˆ†ï¼‰

```typescript
// æ›´æ–°å¯¼å…¥
import {getHue, getStoredTheme, setHue, setTheme, getOpacity, setOpacity} from "../utils/setting-utils";

// æ·»åŠ åŠ è½½å‡½æ•°
function loadOpacity() {
	setOpacity(getOpacity())
}

// åœ¨ init() ä¸­è°ƒç”¨
function init() {
	loadTheme();
	loadHue();
	loadOpacity();  // æ–°å¢
	initCustomScrollbar();
	showBanner();
}
```

## æ€»ç»“

é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†æ•™ç¨‹ï¼Œæˆ‘ä»¬æˆåŠŸåœ¨ Fuwari ä¸»é¢˜ä¸­æ·»åŠ äº†é¢æ¿é€æ˜åº¦è°ƒèŠ‚åŠŸèƒ½ã€‚è¿™ä¸ªå®ç°é‡‡ç”¨äº†ç›´æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²é€æ˜åº¦çš„æ–¹å¼ï¼Œé¿å…äº†ä½¿ç”¨ CSS `opacity` å±æ€§å¸¦æ¥çš„å­å…ƒç´ é€æ˜åº¦é—®é¢˜ã€‚åŒæ—¶ï¼Œé€šè¿‡è‡ªåŠ¨åŒæ­¥æœºåˆ¶ç¡®ä¿äº†åœ¨ä¸åŒåœºæ™¯ä¸‹é€æ˜åº¦è®¾ç½®éƒ½èƒ½æ­£ç¡®åº”ç”¨ã€‚

### å…³é”®è¦ç‚¹å›é¡¾

1. **æŠ€æœ¯é€‰å‹**ï¼šä½¿ç”¨ `rgba()` alpha é€šé“è€Œé `opacity` å±æ€§
2. **æ ¸å¿ƒé€»è¾‘**ï¼šåœ¨ `setting-utils.ts` ä¸­å®ç°é€æ˜åº¦çš„è·å–ã€è®¾ç½®å’Œåº”ç”¨
3. **UI äº¤äº’**ï¼šåœ¨ `DisplaySettings.svelte` ä¸­æ·»åŠ æ»‘å—å’Œé‡ç½®æŒ‰é’®
4. **è‡ªåŠ¨åŒæ­¥**ï¼šä¸»é¢˜åˆ‡æ¢å’Œè‰²ç›¸æ”¹å˜æ—¶è‡ªåŠ¨é‡æ–°åº”ç”¨é€æ˜åº¦
5. **æŒä¹…åŒ–**ï¼šä½¿ç”¨ `localStorage` ä¿å­˜è®¾ç½®ï¼Œé¡µé¢åˆ·æ–°åä»ç„¶æœ‰æ•ˆ

### ä¸‹ä¸€æ­¥

å®ŒæˆåŸºç¡€åŠŸèƒ½åï¼Œä½ å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ‰©å±•ï¼š

- æ·»åŠ é¢„è®¾é€æ˜åº¦é€‰é¡¹ï¼ˆå¿«é€Ÿé€‰æ‹©å¸¸ç”¨å€¼ï¼‰
- ä¸ºä¸åŒç±»å‹çš„é¢æ¿æä¾›ç‹¬ç«‹æ§åˆ¶
- æ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»
- ä½¿ç”¨é¢œè‰²è½¬æ¢åº“å®ç°æ›´ç²¾ç¡®çš„é¢œè‰²è½¬æ¢
- æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ

å¸Œæœ›è¿™ç¯‡è¯¦ç»†çš„æ•™ç¨‹å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ åœ¨å®ç°è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿å‚è€ƒ"å¸¸è§é—®é¢˜è§£ç­”"éƒ¨åˆ†ï¼Œæˆ–è€…åœ¨è¯„è®ºåŒºè®¨è®ºã€‚

---

**ç›¸å…³èµ„æºï¼š**
- [Fuwari ä¸»é¢˜ GitHub](https://github.com/saicaca/fuwari)
- [Astro å®˜æ–¹æ–‡æ¡£](https://docs.astro.build/)
- [Svelte å®˜æ–¹æ–‡æ¡£](https://svelte.dev/docs)
- [CSS å˜é‡ MDN æ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)

